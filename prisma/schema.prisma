// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Station {
    createdAt   DateTime          @default(now())
    updatedAt   DateTime          @updatedAt
    id          String            @db.Char(8)
    nom         String
    departement Int
    frequence   String            @db.VarChar(15)
    posteOuvert Boolean
    typePoste   Int
    lon         Float
    lat         Float
    alt         Float
    postePublic Boolean
    commandes   CommandeStation[]

    @@id([id, frequence])
}

model InformationStation {
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
    id          String       @id @db.Char(8)
    nom         String
    lieuDit     String?
    bassin      String
    dateDebut   DateTime
    dateFin     DateTime?
    typesPoste  TypePoste[]
    parametres  Parametre[]
    producteurs Producteur[]
    positions   Position[]
}

model TypePoste {
    id        Int                @id @default(autoincrement())
    type      Int
    dateDebut DateTime
    dateFin   DateTime?
    stationId String             @db.Char(8)
    station   InformationStation @relation(fields: [stationId], references: [id], onDelete: Cascade)
}

model Parametre {
    id        Int                @id @default(autoincrement())
    nom       String
    dateDebut DateTime
    dateFin   DateTime?
    stationId String             @db.Char(8)
    station   InformationStation @relation(fields: [stationId], references: [id], onDelete: Cascade)
}

model Producteur {
    id        Int                @id @default(autoincrement())
    nom       String
    dateDebut DateTime
    dateFin   DateTime?
    stationId String             @db.Char(8)
    station   InformationStation @relation(fields: [stationId], references: [id], onDelete: Cascade)
}

model Position {
    id        Int                @id @default(autoincrement())
    altitude  Float
    latitude  Float
    longitude Float
    dateDebut DateTime
    dateFin   DateTime?
    stationId String             @db.Char(8)
    station   InformationStation @relation(fields: [stationId], references: [id], onDelete: Cascade)
}

model CommandeStation {
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt
    id             String   @id
    status         String   @default("pending")
    dateDebPeriode DateTime
    dateFinPeriode DateTime
    idStation      String   @db.Char(8)
    frequence      String   @db.VarChar(15)
    station        Station  @relation(fields: [idStation, frequence], references: [id, frequence], onDelete: Cascade)
}

model Decadaire {
    NUM_POSTE     String   @db.Char(8)
    NOM_USUEL     String   @db.VarChar(255)
    LAT           Float
    LON           Float
    ALTI          Float
    AAAAMM        DateTime
    NUM_DECADE    Int
    RR            Float?
    QRR           Int?
    NBRR          Int?
    RRAB          Float?
    QRRAB         Int?
    RRABDAT       Int?
    NBJRR1        Int?
    NBJRR5        Int?
    NBJRR10       Int?
    NBJRR30       Int?
    NBJRR50       Int?
    NBJRR100      Int?
    PMERM         Float?
    QPMERM        Int?
    NBPMERM       Int?
    PMERMINAB     Float?
    QPMERMINAB    Int?
    PMERMINABDAT  Int?
    TX            Float?
    QTX           Int?
    NBTX          Int?
    TXAB          Float?
    QTXAB         Int?
    TXDAT         Int?
    TXMIN         Float?
    QTXMIN        Int?
    TXMINDAT      Int?
    NBJTX0        Int?
    NBJTX25       Int?
    NBJTX30       Int?
    NBJTX35       Int?
    NBJTXI20      Int?
    NBJTXI27      Int?
    NBJTXS32      Int?
    TN            Float?
    QTN           Int?
    NBTN          Int?
    TNAB          Float?
    QTNAB         Int?
    TNDAT         Int?
    TNMAX         Float?
    QTNMAX        Int?
    TNMAXDAT      Int?
    NBJTN5        Int?
    NBJTN10       Int?
    NBJTNI10      Int?
    NBJTNI15      Int?
    NBJTNI20      Int?
    NBJTNS20      Int?
    NBJTNS25      Int?
    NBJGELEE      Int?
    TAMPLIM       Float?
    QTAMPLIM      Int?
    TAMPLIAB      Float?
    QTAMPLIAB     Int?
    TAMPLIABDAT   Int?
    NBTAMPLI      Int?
    TM            Float?
    QTM           Int?
    NBTM          Int?
    TMM           Float?
    QTMM          Int?
    NBTMM         Int?
    NBJTMS24      Int?
    TMMIN         Float?
    QTMMIN        Int?
    TMMINDAT      Int?
    TMMAX         Float?
    QTMMAX        Int?
    TMMAXDAT      Int?
    UNAB          Int?
    QUNAB         Int?
    UNABDAT       Int?
    NBUN          Int?
    UXAB          Int?
    QUXAB         Int?
    UXABDAT       Int?
    NBUX          Int?
    UMM           Int?
    QUMM          Int?
    NBUM          Int?
    TSVM          Float?
    QTSVM         Int?
    NBTSVM        Int?
    FXIAB         Float?
    QFXIAB        Int?
    DXIAB         Int?
    QDXIAB        Int?
    FXIDAT        Int?
    NBJFF10       Int?
    NBJFF16       Int?
    NBJFF28       Int?
    NBFXI         Int?
    FXI3SAB       Float?
    QFXI3SAB      Int?
    DXI3SAB       Int?
    QDXI3SAB      Int?
    FXI3SDAT      Int?
    NBJFXI3S10    Int?
    NBJFXI3S16    Int?
    NBJFXI3S28    Int?
    NBFXI3S       Int?
    FXYAB         Float?
    QFXYAB        Int?
    DXYAB         Int?
    QDXYAB        Int?
    FXYABDAT      Int?
    NBJFXY8       Int?
    NBJFXY10      Int?
    NBJFXY15      Int?
    NBFXY         Int?
    FFM           Float?
    QFFM          Int?
    NBFFM         Int?
    INST          Int?
    QINST         Int?
    NBINST        Int?
    NBSIGMA0      Int?
    NBSIGMA20     Int?
    NBSIGMA80     Int?
    GLOT          Int?
    QGLOT         Int?
    NBGLOT        Int?
    DIFT          Int?
    QDIFT         Int?
    NBDIFT        Int?
    DIRT          Int?
    QDIRT         Int?
    NBDIRT        Int?
    HNEIGEFTOT    Int?
    QHNEIGEFTOT   Int?
    HNEIGEFAB     Int?
    QHNEIGEFAB    Int?
    HNEIGEFDAT    Int?
    NBHNEIGEF     Int?
    NBJNEIG       Int?
    NBJHNEIGEF1   Int?
    NBJHNEIGEF5   Int?
    NBJHNEIGEF10  Int?
    NBJSOLNG      Int?
    NEIGETOTM     Int?
    QNEIGETOTM    Int?
    NEIGETOTAB    Int?
    QNEIGETOTAB   Int?
    NEIGETOTABDAT Int?
    NBJNEIGETOT1  Int?
    NBJNEIGETOT10 Int?
    NBJNEIGETOT30 Int?
    NBJGREL       Int?
    NBJORAG       Int?
    NBJBROU       Int?

    @@id([NUM_POSTE, AAAAMM, NUM_DECADE])
}

model DecadaireAgro {
    NUM_POSTE  String   @db.Char(8)
    NOM_USUEL  String   @db.VarChar(255)
    LAT        Float
    LON        Float
    ALTI       Float
    AAAAMM     DateTime
    NUM_DECADE Int
    RR         Float?
    CRR        Int?
    TN         Float?
    CTN        Int?
    TX         Float?
    CTX        Int?
    FFM        Float?
    CFFM       Int?
    TSVM       Float?
    CTSVM      Int?
    INST       Int?
    CINST      Int?
    GLOT       Int?
    CGLOT      Int?
    ETP        Float?

    @@id([NUM_POSTE, AAAAMM, NUM_DECADE])
}
